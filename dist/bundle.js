(()=>{"use strict";var t,i=function(){function t(t,i,e){this.ctx=t,this.start=i,this.end=e}return t.prototype.Draw=function(){var t=this.start,i=t[0],e=t[1],o=this.end,s=o[0],n=o[1];this.ctx.beginPath(),this.ctx.moveTo(i,e),this.ctx.lineTo(s,n),this.ctx.stroke()},t}(),e=function(){function t(t,i,e,o){this.cellSize=t,this.ctx=o;var s=e%t,n=i%t;this.height=e-s,this.width=i-n}return t.prototype.Draw=function(){for(var t=0;t<=this.height;t+=this.cellSize)new i(this.ctx,[0,t],[this.width,t]).Draw();for(t=0;t<=this.width;t+=this.cellSize)new i(this.ctx,[t,0],[t,this.height]).Draw()},t.prototype.GetWidth=function(){return this.width-this.cellSize},t.prototype.GetHeight=function(){return this.height-this.cellSize},t.prototype.GetCellSize=function(){return this.cellSize},t}();!function(t){t[t.DEAD=0]="DEAD",t[t.ALIVE=1]="ALIVE"}(t||(t={}));var o=function(){function i(t,i,e,o){this.position=[0,0],this.liveNeighbors=[],this.size=t;var s=i[0],n=i[1];this.position[0]=s,this.position[1]=n,this.state=e,this.ctx=o}return i.prototype.Draw=function(t){var i=this,e=this.position,o=e[0],s=e[1];this.ctx.fillStyle=t,setTimeout((function(){i.ctx.fillRect(o*i.size+1,s*i.size+1,i.size-2,i.size-2)}),1e3)},i.prototype.GetPosition=function(){return this.position},i.prototype.IsAlive=function(){return this.state===t.ALIVE},i.prototype.SearchNeighbors=function(t){for(var i=this.position,e=i[0],o=i[1],s=t.GetX(),n=t.GetY(),h=0,r=[[e,o-1],[e+1,o-1],[e+1,o],[e+1,o+1],[e,o+1],[e-1,o+1],[e-1,o],[e-1,o-1]];h<r.length;h++){var a=r[h],l=a[0],c=a[1];if(!(l<0||c<0||l>=s||c>=n)){var u=t.GetCell([l,c]);u&&u.IsAlive()&&this.liveNeighbors.push(u)}}},i.prototype.Transition=function(){this.liveNeighbors.length<=1&&this.state===t.ALIVE?(this.state=t.DEAD,this.Draw("white")):3===this.liveNeighbors.length&&this.state===t.DEAD?(this.state=t.ALIVE,this.Draw("green")):this.liveNeighbors.length>3&&this.state===t.ALIVE&&(this.state=t.DEAD,this.Draw("white")),this.liveNeighbors=[]},i}(),s=function(){function t(t,i){this.grid=t,this.ctx=i,this.values=[];for(var e=Math.floor(t.GetWidth()/t.GetCellSize()),s=Math.floor(t.GetHeight()/t.GetCellSize()),n=0;n<=e;n++){this.values[n]=[];for(var h=0;h<=s;h++)this.values[n][h]=new o(this.grid.GetCellSize(),[n,h],0,i)}}return t.prototype.GetX=function(){return this.values.length},t.prototype.GetY=function(){return this.values[0].length},t.prototype.GetCell=function(t){var i=t[0],e=t[1];try{return this.values[i][e]}catch(i){i instanceof Error&&console.log("Exception caught at GetCell(), position ".concat(t," is off the board: ").concat(i.message))}},t.prototype.SetCell=function(t){try{var i=t.GetPosition(),e=i[0],o=i[1];this.values[e][o]=t}catch(i){i instanceof Error&&console.log("Exception caught at SetCell(), position ".concat(t.GetPosition()," is off the board: ").concat(i.message))}},t.prototype.Start=function(t){for(;t>0;){for(var i=0;i<this.values.length;i++)for(var e=0;e<this.values[0].length;e++)this.values[i][e].SearchNeighbors(this);this.GenerationalTransition(),t--}},t.prototype.GenerationalTransition=function(){for(var t=0;t<this.values.length;t++)for(var i=0;i<this.values[0].length;i++)this.values[t][i].Transition()},t}(),n=document.getElementById("canvas");n.height=window.innerHeight,n.width=window.innerWidth;var h,r,a,l=n.getContext("2d"),c=new e(25,n.width,n.height,l);c.Draw();for(var u=new s(c,l),f=0;f<=499;)h=Math.floor(Math.random()*u.GetX()),r=Math.floor(Math.random()*u.GetY()),a=void 0,(a=new o(c.GetCellSize(),[h,r],1,l)).Draw("green"),u.SetCell(a),f++;!function(t){t.Start(1e3)}(u)})();