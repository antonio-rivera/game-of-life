(()=>{"use strict";var t,e=function(){function t(t,e,i){this.ctx=t,this.start=e,this.end=i}return t.prototype.Draw=function(){var t=this.start,e=t[0],i=t[1],n=this.end,o=n[0],r=n[1];this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(o,r),this.ctx.stroke()},t}(),i=function(){function t(t,e,i,n){this.cellSize=t,this.ctx=n;var o=i%t,r=e%t;this.height=i-o,this.width=e-r}return t.prototype.Draw=function(){for(var t=0;t<=this.height;t+=this.cellSize)new e(this.ctx,[0,t],[this.width,t]).Draw();for(t=0;t<=this.width;t+=this.cellSize)new e(this.ctx,[t,0],[t,this.height]).Draw()},t.prototype.GetWidth=function(){return this.width-this.cellSize},t.prototype.GetHeight=function(){return this.height-this.cellSize},t.prototype.GetCellSize=function(){return this.cellSize},t}();!function(t){t[t.DEAD=0]="DEAD",t[t.ALIVE=1]="ALIVE"}(t||(t={}));var n=function(){function e(t,e,i,n,o){this.position=[0,0],this.liveNeighbors=[],this.size=t;var r=e[0],s=e[1];this.position[0]=r,this.position[1]=s,this.state=i,this.color=n,this.ctx=o}return e.prototype.Draw=function(){var t=this.position,e=t[0],i=t[1];this.ctx.fillStyle=this.color,this.ctx.fillRect(e*this.size+1,i*this.size+1,this.size-2,this.size-2)},e.prototype.Animate=function(){return t=this,e=void 0,n=function(){return function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(h){return function(a){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(s=0)),s;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,n=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==h[0]&&2!==h[0])){s=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){s.label=h[1];break}if(6===h[0]&&s.label<o[1]){s.label=o[1],o=h;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(h);break}o[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(t,s)}catch(t){h=[6,t],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,a])}}}(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,1e3)}))];case 1:return t.sent(),this.Draw(),[2]}}))},new((i=void 0)||(i=Promise))((function(o,r){function s(t){try{a(n.next(t))}catch(t){r(t)}}function h(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,h)}a((n=n.apply(t,e||[])).next())}));var t,e,i,n},e.prototype.GetPosition=function(){return this.position},e.prototype.IsAlive=function(){return this.state===t.ALIVE},e.prototype.SearchNeighbors=function(t){for(var e=this.position,i=e[0],n=e[1],o=t.GetX(),r=t.GetY(),s=0,h=[[i,n-1],[i+1,n-1],[i+1,n],[i+1,n+1],[i,n+1],[i-1,n+1],[i-1,n],[i-1,n-1]];s<h.length;s++){var a=h[s],l=a[0],c=a[1];if(!(l<0||c<0||l>=o||c>=r)){var u=t.GetCell([l,c]);u&&u.IsAlive()&&this.liveNeighbors.push(u)}}},e.prototype.Transition=function(){this.liveNeighbors.length<=1&&this.state===t.ALIVE?(this.state=t.DEAD,this.color="white",this.Animate()):3===this.liveNeighbors.length&&this.state===t.DEAD?(this.state=t.ALIVE,this.color="green",this.Animate()):this.liveNeighbors.length>3&&this.state===t.ALIVE&&(this.state=t.DEAD,this.color="white",this.Animate()),this.liveNeighbors=[]},e}(),o=function(){function t(t,e){this.grid=t,this.ctx=e,this.values=[];for(var i=Math.floor(t.GetWidth()/t.GetCellSize()),o=Math.floor(t.GetHeight()/t.GetCellSize()),r=0;r<=i;r++){this.values[r]=[];for(var s=0;s<=o;s++)this.values[r][s]=new n(this.grid.GetCellSize(),[r,s],0,"white",e)}}return t.prototype.GetX=function(){return this.values.length},t.prototype.GetY=function(){return this.values[0].length},t.prototype.GetCell=function(t){var e=t[0],i=t[1];try{return this.values[e][i]}catch(e){e instanceof Error&&console.log("Exception caught at GetCell(), position ".concat(t," is off the board: ").concat(e.message))}},t.prototype.SetCell=function(t){try{var e=t.GetPosition(),i=e[0],n=e[1];this.values[i][n]=t}catch(e){e instanceof Error&&console.log("Exception caught at SetCell(), position ".concat(t.GetPosition()," is off the board: ").concat(e.message))}},t.prototype.Start=function(t){for(;t>0;){for(var e=0;e<this.values.length;e++)for(var i=0;i<this.values[0].length;i++)this.values[e][i].SearchNeighbors(this);this.GenerationalTransition(),t--}},t.prototype.GenerationalTransition=function(){for(var t=0;t<this.values.length;t++)for(var e=0;e<this.values[0].length;e++)this.values[t][e].Transition()},t}();window.addEventListener("load",(function(){var t=document.getElementById("canvas");t.height=window.innerHeight,t.width=window.innerWidth;var e,r,s,h=t.getContext("2d"),a=new i(25,t.width,t.height,h);a.Draw();for(var l=new o(a,h),c=0;c<=499;)e=Math.floor(Math.random()*l.GetX()),r=Math.floor(Math.random()*l.GetY()),s=void 0,(s=new n(a.GetCellSize(),[e,r],1,"green",h)).Draw(),l.SetCell(s),c++;l.Start(1e3)}))})();